# üìö Revis√£o Sistem√°tica da Literatura - CCW Research

## üéØ Vis√£o Geral

Sistema modular para revis√£o sistem√°tica da literatura em educa√ß√£o matem√°tica com t√©cnicas computacionais, seguindo protocolo PRISMA.

**Status atual**: ‚úÖ Pipeline completo funcionando | üß™ Testes validados (100% pass rate) | üìä Visualiza√ß√µes PRISMA corretas

---

## ‚ö° Quick Start

```bash
# 1. Instalar depend√™ncias
cd c:\dev\ccw
pip install -r research/requirements.txt

# 2. Configurar ambiente (opcional)
cp research/.env.example research/.env
# Editar .env com credenciais de APIs se necess√°rio

# 3. Executar pipeline completo
python -m research.src.cli run-pipeline
python -m research.src.cli export

# 4. Ver resultados
# Os arquivos s√£o gerados em research/exports/
```

---

## üèóÔ∏è Arquitetura do Sistema

```
research/
‚îú‚îÄ‚îÄ src/                          # C√≥digo fonte modular
‚îÇ   ‚îú‚îÄ‚îÄ config.py                 # Configura√ß√£o centralizada
‚îÇ   ‚îú‚îÄ‚îÄ cli.py                    # CLI principal
‚îÇ   ‚îú‚îÄ‚îÄ database/                 # Gerenciamento SQLite
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ manager.py            # Interface do banco
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.py             # Schema + migrations
‚îÇ   ‚îú‚îÄ‚îÄ ingestion/                # Coleta de dados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ semantic_scholar.py  # Semantic Scholar API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openalex.py           # OpenAlex API
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ crossref.py           # Crossref API
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ core.py               # CORE API (inst√°vel)
‚îÇ   ‚îú‚îÄ‚îÄ processing/               # Processamento de dados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dedup.py              # Deduplica√ß√£o DOI+TF-IDF
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scoring.py            # Score de relev√¢ncia
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ selection.py          # Sele√ß√£o PRISMA
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ language_utils.py     # Detec√ß√£o de idioma
‚îÇ   ‚îú‚îÄ‚îÄ analysis/                 # An√°lise e visualiza√ß√£o
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ visualizations.py     # Gr√°ficos PRISMA
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ reports.py            # Relat√≥rios HTML
‚îÇ   ‚îú‚îÄ‚îÄ exports/                  # Exporta√ß√£o de dados
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ excel.py              # Excel + CSV + JSON
‚îÇ   ‚îî‚îÄ‚îÄ pipeline/                 # Orquestra√ß√£o
‚îÇ       ‚îî‚îÄ‚îÄ run.py                # Pipeline completo
‚îú‚îÄ‚îÄ tests/                        # Testes automatizados
‚îÇ   ‚îú‚îÄ‚îÄ test_prisma_stages.py     # ‚úÖ Valida√ß√£o PRISMA
‚îÇ   ‚îú‚îÄ‚îÄ test_complete_pipeline.py # Suite completa
‚îÇ   ‚îî‚îÄ‚îÄ test_performance_benchmark.py
‚îú‚îÄ‚îÄ exports/                      # Sa√≠das geradas
‚îÇ   ‚îú‚îÄ‚îÄ summary_report.html       # Relat√≥rio resumido
‚îÇ   ‚îú‚îÄ‚îÄ papers_report.html        # Papers inclu√≠dos
‚îÇ   ‚îú‚îÄ‚îÄ gap_analysis.html         # An√°lise de lacunas
‚îÇ   ‚îú‚îÄ‚îÄ analysis/                 # Dados estruturados
‚îÇ   ‚îú‚îÄ‚îÄ visualizations/           # Gr√°ficos PNG
‚îÇ   ‚îî‚îÄ‚îÄ reports/                  # Relat√≥rios completos
‚îú‚îÄ‚îÄ cache/                        # Cache de APIs
‚îú‚îÄ‚îÄ logs/                         # Logs de execu√ß√£o
‚îî‚îÄ‚îÄ systematic_review.db          # Banco SQLite principal
```

---

## üîç Metodologia PRISMA

### Bases de Dados Integradas

| API | Cobertura | Status | Taxa de Sucesso |
|-----|-----------|--------|-----------------|
| **Semantic Scholar** | CS + multidisciplinar | ‚úÖ Est√°vel | >95% |
| **OpenAlex** | 250M+ works abertos | ‚úÖ Est√°vel | >95% |
| **Crossref** | Metadados DOI | ‚úÖ Est√°vel | >95% |
| **CORE** | Open access | ‚ö†Ô∏è Inst√°vel | ~70% |

### Estrat√©gia de Busca

**55 queries estruturadas** combinando:

**Termos Prim√°rios** (dom√≠nio):
- Mathematics education, math learning
- Ensino de matem√°tica, educa√ß√£o matem√°tica

**Termos Secund√°rios** (t√©cnicas):
- Machine learning, artificial intelligence
- Adaptive learning, intelligent tutoring systems
- Learning analytics, educational data mining

### Crit√©rios de Sele√ß√£o

**‚úÖ Inclus√£o**:
- Artigos peer-reviewed (2015-2025)
- Foco em t√©cnicas computacionais + educa√ß√£o matem√°tica
- Metodologia e evid√™ncias emp√≠ricas claras
- Idiomas: ingl√™s ou portugu√™s

**‚ùå Exclus√£o**:
- Metodologia insuficiente (abstract <50 palavras)
- Foco n√£o-educacional (biologia, f√≠sica sem contexto educacional)
- Conte√∫do n√£o-cient√≠fico (editoriais, coment√°rios)
- Baixa relev√¢ncia (score <4.0)

### Fluxo PRISMA

```
Identifica√ß√£o ‚Üí Deduplica√ß√£o ‚Üí Triagem ‚Üí Elegibilidade ‚Üí Inclus√£o
    (APIs)         (DOI+TF-IDF)   (Crit√©rios) (Score‚â•4.0)  (Final)
```

**Pipeline atual do banco**:
- **Identifica√ß√£o**: 11.966 papers coletados
- **Triagem**: 11.966 avaliados (100% passam crit√©rios b√°sicos)
- **Elegibilidade**: 11.966 analisados por relev√¢ncia
- **Inclu√≠dos**: 41 papers de alta relev√¢ncia (score ‚â•4.0)
- **Exclu√≠dos**: 11.925 papers por baixo score de relev√¢ncia

---

## üöÄ Como Usar

### CLI Completo

```bash
# Inicializar banco
python -m research.src.cli init-db

# Executar pipeline completo
python -m research.src.cli run-pipeline
  --apis semantic_scholar openalex crossref  # APIs espec√≠ficas
  --min-score 4.5                            # Score m√≠nimo customizado
  --limit-per-query 100                      # Limite por query

# Ver estat√≠sticas
python -m research.src.cli stats

# Mostrar amostra de papers
python -m research.src.cli show

# Importar dados externos
python -m research.src.cli import-csv dados.csv

# Exportar com relat√≥rios e visualiza√ß√µes
python -m research.src.cli export -o research/exports/

# Normalizar est√°gios PRISMA (se necess√°rio)
python -m research.src.cli normalize-prisma
```

### Uso Program√°tico

```python
from research.src.pipeline.run import SystematicReviewPipeline
from research.src.config import load_config

config = load_config()
pipeline = SystematicReviewPipeline(config)

# Pipeline completo
results = pipeline.run_full_pipeline(
    export=True,
    min_relevance_score=4.0
)

# Ou por etapas
pipeline.generate_search_queries()
pipeline.collect_data(apis=["semantic_scholar", "openalex"])
pipeline.process_data()
pipeline.apply_selection_criteria(min_relevance_score=4.5)
files = pipeline.export_results()
```

---

## üìä Outputs Gerados

### Arquivos de Exporta√ß√£o

**Em `research/exports/`** (arquivos fixos, data no conte√∫do):

1. **summary_report.html**: Relat√≥rio resumido com estat√≠sticas gerais
2. **papers_report.html**: Lista de papers inclu√≠dos com detalhes
3. **gap_analysis.html**: An√°lise de lacunas de pesquisa
4. **index.html**: √çndice naveg√°vel de todos os relat√≥rios

**Em `research/exports/analysis/`**:
- `papers.xlsx`: Dados completos em Excel
- `papers.csv`: Dados em CSV
- `papers.json`: Dados em JSON

**Em `research/exports/visualizations/`**:
- `prisma_flow.png`: Diagrama de fluxo PRISMA
- `selection_funnel.png`: Funil de sele√ß√£o
- `papers_by_year.png`: Distribui√ß√£o temporal
- `techniques_distribution.png`: T√©cnicas computacionais
- `database_coverage.png`: Cobertura por API
- `relevance_distribution.png`: Distribui√ß√£o de relev√¢ncia

### Dados nos Papers Inclu√≠dos

Cada paper inclu√≠do registra:
- **Crit√©rios atendidos**: year_range, language, math_focus, computational_techniques
- **Score de relev√¢ncia**: 0-10 (inclu√≠dos ‚â•4.0)
- **Motivo de inclus√£o**: Lista de crit√©rios que qualificaram o paper
- **Fonte**: API de origem (semantic_scholar, openalex, crossref, core)
- **Metadados completos**: t√≠tulo, abstract, autores, ano, DOI, etc.

---

## üß™ Testes Automatizados

### Executar Testes

```bash
# Todos os testes
cd research && pytest

# Testes PRISMA espec√≠ficos
pytest research/tests/test_prisma_stages.py -v

# Com cobertura
pytest --cov=research.src --cov-report=html
```

### Suite de Testes

**‚úÖ test_prisma_stages.py** (9 testes, 100% pass):
- Crit√©rios de inclus√£o/exclus√£o
- Fases PRISMA (screening, eligibility, inclusion)
- Consist√™ncia de estat√≠sticas
- Registro de motivos de exclus√£o/inclus√£o

**‚úÖ test_complete_pipeline.py**:
- Integra√ß√£o completa do pipeline
- Valida√ß√£o de APIs e coleta
- Processamento e deduplica√ß√£o
- Sele√ß√£o PRISMA e exporta√ß√£o

**‚úÖ test_performance_benchmark.py**:
- M√©tricas de performance
- Cache hit rate
- Tempo de execu√ß√£o por fase

---

## ‚öôÔ∏è Configura√ß√£o

### Vari√°veis de Ambiente (.env)

```bash
# APIs (opcionais - funcionam sem chaves)
SEMANTIC_SCHOLAR_API_KEY=your_key
CORE_API_KEY=your_key
USER_EMAIL=your_email@domain.com

# Rate limits (segundos entre requests)
SEMANTIC_SCHOLAR_RATE_DELAY=4.0
OPENALEX_RATE_DELAY=6.0
CROSSREF_RATE_DELAY=4.0

# Crit√©rios de revis√£o
REVIEW_YEAR_MIN=2015
REVIEW_YEAR_MAX=2025
REVIEW_LANGUAGES=en,pt
REVIEW_RELEVANCE_THRESHOLD=4.0
```

### Personalizar Termos de Busca

Edite `research/src/config/search_terms.py`:

```python
# Adicionar novos termos
COMPUTATIONAL_TECHNIQUES_EN.append("new_technique")
EDUCATIONAL_CONTEXTS_PT.append("novo_contexto")

# Sistema gera automaticamente todas as combina√ß√µes
```

---

## üîß Funcionalidades T√©cnicas

### Sistema de Cache Inteligente

- Cache local por query em JSON
- Speedup at√© 22x em execu√ß√µes repetidas
- Evita sobrecarga nas APIs
- Armazenamento eficiente por fonte

### Deduplica√ß√£o Avan√ßada

**Estrat√©gia em 3 n√≠veis**:
1. DOI/URL id√™nticos (remo√ß√£o direta)
2. Similaridade TF-IDF de t√≠tulos (threshold 0.9)
3. Preserva√ß√£o da melhor fonte (DOI > abstract completo)

### Scoring Multi-Crit√©rio

**Score 0-10 baseado em**:
- T√©cnicas computacionais mencionadas
- Contexto educacional matem√°tico
- Qualidade metodol√≥gica
- M√©tricas de impacto (cita√ß√µes, H-index)

### Detec√ß√£o Robusta de Idioma

**Estrat√©gia h√≠brida**:
1. `langdetect` em t√≠tulo + abstract + keywords
2. Fallback regex para portugu√™s/ingl√™s
3. Cache de resultados para performance

### Logging Estruturado

**√önico arquivo de log ativo**:
- `research/logs/ingestion.base.log`: Log consolidado de todas as opera√ß√µes
- Rota√ß√£o autom√°tica quando atinge 10MB
- 3 backups mantidos
- Formato: `timestamp | level | module | message`

---

## üêõ Troubleshooting

### Problemas Comuns

**Rate Limiting (HTTP 429)**:
```bash
# Aumentar delays no .env
SEMANTIC_SCHOLAR_RATE_DELAY=6.0
OPENALEX_RATE_DELAY=8.0
```

**Cache Corrompido**:
```bash
# Limpar cache
rm -rf research/cache/
```

**Logs Detalhados**:
```bash
# Habilitar debug
export DEBUG=1
python -m research.src.cli run-pipeline
```

**Performance Lenta**:
- Usar cache em execu√ß√µes subsequentes (autom√°tico)
- Reduzir n√∫mero de queries (`--limit-per-query 50`)
- Usar apenas APIs est√°veis (`--apis semantic_scholar openalex`)

---

## üìà M√©tricas de Qualidade

### Performance Atual

- **Taxa de sucesso das APIs**: >95% (exceto CORE ~70%)
- **Tempo de execu√ß√£o**: 30-60 minutos (55 queries)
- **Taxa de deduplica√ß√£o**: ~40% (DOI+similaridade)
- **Taxa de inclus√£o final**: ~0.3% (41 de 11.966)
- **Cobertura temporal**: 2015-2025 (10 anos completos)

### Qualidade dos Dados

- **Papers com abstract**: >85%
- **Papers com DOI**: >60%
- **Papers com ano v√°lido**: >95%
- **Reprodutibilidade**: 100% via CLI + config

---

## üéì Contribui√ß√£o para o TCC

### Entreg√°veis Prontos

1. ‚úÖ Base de dados estruturada (SQLite)
2. ‚úÖ An√°lises estat√≠sticas automatizadas
3. ‚úÖ Visualiza√ß√µes profissionais (PNG)
4. ‚úÖ Relat√≥rios HTML completos
5. ‚úÖ Pipeline reprodut√≠vel e audit√°vel

### Metodologia Cient√≠fica

- ‚úÖ Protocolo PRISMA completo
- ‚úÖ Transpar√™ncia total (c√≥digo aberto)
- ‚úÖ Reprodutibilidade garantida
- ‚úÖ Auditabilidade via logs
- ‚úÖ Rastreabilidade de cada paper

### Insights para o Prot√≥tipo

**T√©cnicas Mais Utilizadas**:
- Machine learning para modelagem
- Learning analytics para personaliza√ß√£o
- Sistemas adaptativos baseados em compet√™ncias
- Avalia√ß√£o automatizada com feedback

**Lacunas Identificadas**:
- Integra√ß√£o de m√∫ltiplas t√©cnicas
- Escalabilidade para grandes turmas
- Adapta√ß√£o cultural e pedag√≥gica
- M√©tricas padronizadas de avalia√ß√£o

---

## üë• Cr√©ditos

**TCC - Ci√™ncia da Computa√ß√£o**  
**Institui√ß√£o**: IFC Videira  
**Per√≠odo**: 2024-2025

### üìö Refer√™ncias

- PRISMA Guidelines: http://www.prisma-statement.org/
- Semantic Scholar API: https://api.semanticscholar.org/
- OpenAlex API: https://docs.openalex.org/
- Crossref API: https://github.com/CrossRef/rest-api-doc
- CORE API: https://core.ac.uk/docs/

---

*üìÖ √öltima atualiza√ß√£o: Outubro 2025*  
*‚úÖ Status: Sistema funcionando | Pipeline validado | Testes 100% pass*
